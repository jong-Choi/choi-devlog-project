# 페이지별 설명

## 페이지 주소

### `app/(app-shell)/page.tsx`

시리즈, 최근 게시글, 지식 지도를 한 눈에 볼 수 있는 페이지

- 사용된 서버 액션 : `getPosts`, `getSeriesList`

### `app/(app-shell)/series/page.tsx`

추천 시리즈 목록, 대분류별 시리즈 목록을 볼 수 있는 페이지

- 사용된 서버 액션 : `getAllCategories`, `getSeriesList`

### `app/(app-shell)/series/[url_slug]/page.tsx`

특정 시리즈에 포함된 게시글을 볼 수 있는 페이지

- 사용된 서버 액션 : `getSeriesByUrlSlug`, `getPostsBySeriesId`

### `app/(app-shell)/posts/page.tsx`

최신 게시글 목록 및 검색 결과를 볼 수 있는 페이지

- 사용된 서버 액션 : `getPosts`

### `/app/map`

군집 지도 및 군집별 게시글을 볼 수 있는 페이지

- 사용된 서버 액션 : `getClusterData`, `getClusterSimData`, `getClusterFeed`

### `/app/post/[url_slug]`

### server actions

#### 캐싱

##### 리팩토링 완료

- `getPosts`

  - 기능 : 최근 게시글 / 검색어에 맞는 게시글을 카드 형식 데이터에 맞게 가져온다.
  - 캐시 조건 : 검색어가 없는 최근 게시글일 때.
  - 캐시 태그 : CACHE_TAGS.POST.ALL(), CACHE_TAGS.POST.BY_PAGE(페이지 번호)
  - 재검증 조건 :
  - db : `search_posts_with_snippet` RCP
  - 사용된 페이지 : `/`, `/posts`
  - 파일 경로 : `components/posts/infinite-scroll/actions.tsx`

- `getSeriesList`

  - 기능 : 서브카테고리 목록을 작성된 게시글 수 및 최근 게시글 작성일과 함께 가져온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : `subcategories_with_meta`, CACHE_TAGS.SUBCATEGORY.ALL(), CACHE_TAGS.SUBCATEGORY.BY_CATEGORY_ID(categoryId), CACHE_TAGS.SUBCATEGORY.BY_RECOMMENDED()
  - 재검증 조건 :
  - db : `subcategories_with_meta` view
  - 사용된 페이지 : `/`, `/posts`
  - 파일 경로 : `components/series/actions.ts`

- `getSeriesByUrlSlug`

  - 기능 : URL_SLUG를 통해 서브 카테고리 정보를 하나 가져온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : CACHE_TAGS.SUBCATEGORY.ALL(), CACHE_TAGS.SUBCATEGORY.BY_URL_SLUG(urlSlug),
  - 재검증 조건 : 없음
  - db : `subcategories_with_meta` view
  - 사용된 페이지 : `/series/[urlSlug]`,
  - 파일 경로 : `components/series/actions.ts`

- `getPostsBySeriesId`

  - 기능 : 서브 카테고리 ID를 이용해서 게시글들을 가져온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : "posts_with_tags_summaries", CACHE_TAGS.POST.ALL(), CACHE_TAGS.POST.BY_SUBCATEGORY_ID(seriesId),,
  - 재검증 조건 :
  - db : `posts_with_tags_summaries` view
  - 사용된 페이지 : `/series/[urlSlug]`,
  - 파일 경로 : `components/series/actions.ts`

- `getClusterWithPosts`

  - 기능 : 군집 데이터와 게시글 데이터를 조인하여 가져온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : "clustered_posts_groups_with_posts", CACHE_TAGS.CLUSTER.ALL()
  - 재검증 조건 :
  - db : `clustered_posts_groups_with_posts` view
  - 사용된 페이지 : `/map`,
  - 파일 경로 : `app/map/actions.tsx`

##### 리팩토링 미완료

- `getAllCategories`

  - 기능 : 전체 대분류 목록을 가져온다. (서브 카테고리 미포함)
  - 캐시 조건 : 항상
  - 캐시 태그 : CACHE_TAGS.CATEGORY.ALL(),
  - 재검증 조건 :
  - db : `categories` table
  - 사용된 페이지 : `/series`,
  - 파일 경로 : `app/post/actions.tsx`

- `getClusterData`

  - 기능 : 군집 목록을 가져온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : CACHE_TAGS.CLUSTER.ALL()
  - 재검증 조건 :
  - db : `clustered_posts_groups` table
  - 사용된 페이지 : `/map`,
  - 파일 경로 : `app/map/actions.tsx`

- `getClusterSimData`

  - 기능 : 군집 간 유사도 목록을 가져 온다.
  - 캐시 조건 : 항상
  - 캐시 태그 : CACHE_TAGS.CLUSTER.ALL()
  - 재검증 조건 :
  - db : `clustered_posts_groups_similarities` table
  - 사용된 페이지 : `/map`,
  - 파일 경로 : `app/map/actions.tsx`
